---
- block:
  - name: "Create virtualenv for {{ name }}"
    command: "{{ python_3_install_path }}/bin/python3 -m venv {{ vars.get(name ~ '_install_path') }}"

  - name: "Install {{ name }} into virtualenv"
    pip:
      executable: "{{ vars.get(name ~ '_install_path') }}/bin/pip"
      name: "{{ name }}{{ ('==' ~ vars.get(name ~ '_version')) if vars.get(name ~ '_version') else '' }}"
  when: not vars.get(name ~ '_skip')
