---
- name: "Begin install for {{ name }}/{{ vars.get(name ~ '_version', vars.get(name ~ '_default_version')) }}"
  include_tasks: core.yml

- block:
  - name: "Include software steps for {{ name }}/{{ vars[name ~ '_version'] }}"
    include_tasks: "{{ task }}.yml"
    loop: "{{ vars.get(name ~ '_steps', []) }}"
    loop_control:
      loop_var: task

  - include_tasks: mark_installed.yml
  when: not vars.get(name ~ '_skip')
